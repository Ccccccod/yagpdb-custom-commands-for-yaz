{{/* Var/const */}}
{{ $id := .User.ID }}{{ $id64 := toInt64 $id }}

{{ $args := parseArgs 1 "" (carg "string" "slot/spin") }}
{{ $cmd := lower (index .Args 1) }}

{{ if eq $cmd "slot" "spin" }}
	{{ $yazcoin := "<:yazcoin:561321461877309450>"}}
	{{ $desc := print "**————————**\n"
		$yazcoin "⠀⠀🍋⠀⠀🍊\n"
		"🍉⠀⠀" $yazcoin "⠀⠀🍋⬅\n"
		"🍊⠀⠀🍉⠀⠀" $yazcoin "\n"
		"**————————**\n"
		"-# *:warning:Slot machine is still being developed, more features are coming. This machine expires <t:" (currentTime.Add .TimeHour).Unix ":R>*"}}
	{{ $embed := cembed
		"color" 16766720
		"description" $desc
		"footer" (sdict
			"icon_url" (.User.AvatarURL "4096")
			"text" (printf "UserID: %d" $id) )
		"timestamp" currentTime }}
	{{ $buttons := cslice
		(cbutton
			"label" "Spin"
			"custom_id" "slot-spin" )}}
	{{ $msg := complexMessage
		"reply" .Message.ID
		"content" (printf "**%s's 🍒SLOTS MACHINE🍒!**" .User.Mention)
		"embed" $embed
		"buttons" $buttons }}
	{{ $msgId := sendMessageNoEscapeRetID nil $msg }}
	{{ $slotMachine := (sdict
		"Url" (print "https://discord.com/channels/" .Guild.ID "/" .Channel.ID "/" $msgId ")")
		"ChannelId" .Channel.ID
		"MessageId" $msgId )}}
	{{ dbSetExpire $id64 "slotMachine" $slotMachine 3600 }}
{{ end }}